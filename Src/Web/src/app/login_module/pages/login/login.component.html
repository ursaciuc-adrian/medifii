<div class="container">
  <div class="logo">
    <p>Medi<span>fii</span></p>
  </div>
  <mat-tab-group [(selectedIndex)]="selectedIndex" dynamicHeight class="login-tab-group">
    <mat-tab label="Login">
      <form
        #loginForm="ngForm"
        class="login mat-elevation-z4"
        (ngSubmit)="login(loginForm)"
      >
        <mat-slide-toggle
          [checked]="patient"
          (change)="patient = $event.checked"
          >I'm a patient!</mat-slide-toggle
        ><br />
        <button
          mat-fab
          color="primary"
          *ngIf="patient"
          (click)="loginService.setSession()"
        >
          Enter ->
        </button>
        <mat-form-field *ngIf="!patient">
          <input required matInput ngModel placeholder="Email" name="email" />
          <mat-error *ngIf="loginForm.controls.email?.hasError('required')">
            Email is <strong>required</strong>
          </mat-error>
          <mat-error *ngFor="let err of loginForm.controls.email?.apiErrors">{{
            err
          }}</mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="!patient">
          <input
            required
            type="password"
            matInput
            ngModel
            placeholder="Password"
            name="password"
          />
          <mat-error *ngIf="loginForm.controls.password?.hasError('required')">
            Password is <strong>required</strong>
          </mat-error>
          <mat-error
            *ngFor="let err of loginForm.controls.password?.apiErrors"
            >{{ err }}</mat-error
          >
        </mat-form-field>
        <button
          mat-fab
          color="primary"
          type="submit"
          [disabled]="!loginForm.valid"
          *ngIf="!patient"
        >
          Login
        </button>
      </form>
    </mat-tab>
    <mat-tab label="Register">
      <form
        #registerForm="ngForm"
        class="signup mat-elevation-z4"
        (ngSubmit)="register(registerForm)"
      >
        <mat-form-field>
          <mat-label>Your pharmacy</mat-label>
          <select matNativeControl required ngModel name="pharmacyId">
            <option *ngFor="let pharmacy of pharmacies" [value]="pharmacy.id">{{
              pharmacy.name
            }}</option>
          </select>
          <mat-error
            *ngIf="registerForm.controls.pharmacyId?.hasError('required')"
          >
            Pharmacy is <strong>required</strong>
          </mat-error>
          <mat-error
            *ngFor="let err of registerForm.controls.pharmacyId?.apiErrors"
            >{{ err }}</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <input required matInput ngModel placeholder="Email" name="email" />
          <mat-error *ngIf="registerForm.controls.email?.hasError('required')">
            Email is <strong>required</strong>
          </mat-error>
          <mat-error
            *ngFor="let err of registerForm.controls.email?.apiErrors"
            >{{ err }}</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <input
            required
            matInput
            ngModel
            placeholder="First name"
            name="firstName"
          />
          <mat-error
            *ngIf="registerForm.controls.firstName?.hasError('required')"
          >
            First name is <strong>required</strong>
          </mat-error>
          <mat-error
            *ngFor="let err of registerForm.controls.firstName?.apiErrors"
            >{{ err }}</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <input
            required
            matInput
            ngModel
            placeholder="Last name"
            name="lastName"
          />
          <mat-error
            *ngIf="registerForm.controls.lastName?.hasError('required')"
          >
            Last name is <strong>required</strong>
          </mat-error>
          <mat-error
            *ngFor="let err of registerForm.controls.lastName?.apiErrors"
            >{{ err }}</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <input
            required
            type="password"
            matInput
            ngModel
            placeholder="Password"
            name="password"
            #password="ngModel"
          />
          <mat-error
            *ngIf="registerForm.controls.password?.hasError('required')"
          >
            Password is <strong>required</strong>
          </mat-error>
          <mat-error
            *ngFor="let err of registerForm.controls.password?.apiErrors"
            >{{ err }}</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <input
            required
            type="password"
            matInput
            ngModel
            placeholder="Repeat password"
            name="confirmPassword"
            #confirmPassword="ngModel"
          />
          <mat-error
            *ngIf="registerForm.controls.confirmPassword?.hasError('required')"
          >
            Repeat password is <strong>required</strong>
          </mat-error>
          <mat-error
            *ngFor="let err of registerForm.controls.confirmPassword?.apiErrors"
            >{{ err }}</mat-error
          >
        </mat-form-field>
        <button
          mat-fab
          color="primary"
          type="submit"
          [disabled]="
            !registerForm.form.valid || password.value != confirmPassword.value
          "
        >
          Register
        </button>
      </form>
    </mat-tab>
  </mat-tab-group>
  <div class="background">
    <img src="../../../../assets/login_bck2.png" alt="" />
  </div>
</div>
